(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["apply"],{1533:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{"background-color":"#ffffff",color:"white","font-family":"'Noto Sans SC'","font-weight":"300"}},[r("el-row",{staticStyle:{width:"100%"},attrs:{type:"flex"}},[r("img",{attrs:{src:"sign2.jpg",width:"100%"}})]),r("el-main",[r("el-row",{staticStyle:{"margin-top":"50px"},attrs:{type:"flex",justify:"center"}},[r("el-col",{staticStyle:{"line-height":"40px"},attrs:{xs:24,sm:18,xl:18}},[r("div",{staticClass:"shadow-border"},[r("el-row",{staticStyle:{color:"#000000","font-size":"26px","margin-top":"20px"},attrs:{type:"flex",justify:"center"}},[t._v(" Initiate project contract signing ")]),r("el-row",{staticStyle:{color:"#000000","font-size":"14px"}},[t._v(" Help you resolve your contract disputes ")]),r("el-row",{staticStyle:{"margin-bottom":"20px","margin-top":"30px"},attrs:{type:"flex",justify:"center"}},[r("el-col",{staticStyle:{"line-height":"30px"},attrs:{xs:22,sm:17}},[r("vs-input",{attrs:{state:"success",success:"",placeholder:t.$t("applyInputAddr"),block:""},scopedSlots:t._u([{key:"icon",fn:function(){return[r("i",{staticClass:"bx bx-user"})]},proxy:!0}]),model:{value:t.personAddrArray[0],callback:function(e){t.$set(t.personAddrArray,0,e)},expression:"personAddrArray[0]"}})],1),r("el-col",{staticStyle:{"margin-top":"-5px","text-align":"right"},attrs:{xs:2,sm:1}},[r("el-row",{attrs:{type:"flex",justify:"center"}},[r("vs-button",{attrs:{circle:"",icon:""},on:{click:t.addAddr}},[r("i",{staticClass:"bx bx-plus"})])],1)],1)],1),t._l(t.personAddrArray,(function(e,n){return n>=1?r("el-row",{key:n,staticStyle:{"margin-bottom":"20px"},attrs:{type:"flex",justify:"center"}},[r("el-col",{staticStyle:{"line-height":"30px"},attrs:{xs:24,sm:18}},[r("vs-input",{attrs:{state:"success",success:"",placeholder:t.$t("applyInputAddr"),block:""},scopedSlots:t._u([{key:"icon",fn:function(){return[r("i",{staticClass:"bx bx-user"})]},proxy:!0}],null,!0),model:{value:t.personAddrArray[n],callback:function(e){t.$set(t.personAddrArray,n,e)},expression:"personAddrArray[index]"}})],1)],1):t._e()})),r("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"flex",justify:"center"}},[r("el-col",{staticStyle:{"line-height":"30px"},attrs:{xs:24,sm:18}},[r("vs-input",{attrs:{state:"primary",primary:"",placeholder:"Please input title",block:""},scopedSlots:t._u([{key:"icon",fn:function(){return[r("i",{staticClass:"bx bxs-file"})]},proxy:!0}]),model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)],1),r("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"flex",justify:"center"}},[r("el-col",{staticStyle:{"line-height":"30px"},attrs:{xs:24,sm:18}},[r("m-editor",{attrs:{placeholder:"Please input content of this contract"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1)],1),r("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"flex",justify:"center"}},[r("el-col",{staticStyle:{"line-height":"30px",color:"#000000","font-size":"14px"},attrs:{xs:24,sm:18}},[r("vs-checkbox",{model:{value:t.isEncrypt,callback:function(e){t.isEncrypt=e},expression:"isEncrypt"}},[t._v(" Whether to encrypt the content of the contract? ")])],1)],1),r("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"flex",justify:"center"}},[r("el-col",{staticStyle:{"line-height":"30px"},attrs:{xs:24,sm:9}},[r("vs-select",{attrs:{block:"",state:"primary",placeholder:"Choose token kindle"},model:{value:t.tokenIndex,callback:function(e){t.tokenIndex=e},expression:"tokenIndex"}},t._l(t.tokens,(function(e,n){return r("vs-option",{key:n,attrs:{label:e.name,value:n+1}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),r("el-col",{staticStyle:{"line-height":"30px"},attrs:{xs:24,sm:9}},[r("vs-input",{attrs:{"icon-after":"",state:"primary",primary:"",placeholder:"Please input amount",block:""},scopedSlots:t._u([{key:"icon",fn:function(){return[r("div",{staticStyle:{cursor:"pointer","font-size":"12px"},on:{click:t.maxSwapMoney}},[t._v(" "+t._s(t.$t("max"))+" ")])]},proxy:!0}]),model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}})],1)],1),r("el-row",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"flex",justify:"center"}},[r("el-col",{staticStyle:{"line-height":"30px"},attrs:{xs:24,sm:18}},[t.judgerOrgs.length>0?r("vs-select",{attrs:{block:"",filter:"",state:"primary",placeholder:"Please choose the judge team that you think is the most fair"},model:{value:t.kindleIndex,callback:function(e){t.kindleIndex=e},expression:"kindleIndex"}},t._l(t.judgerOrgs,(function(e,n){return r("vs-option",{key:n,attrs:{label:e.id,value:n+1}},[t._v(" "+t._s(t.showDatas[n].text)+" ")])})),1):t._e()],1)],1),r("el-row",{staticStyle:{"margin-bottom":"20px","flex-wrap":"wrap"},attrs:{type:"flex",justify:"center"}},[r("el-col",{staticStyle:{"line-height":"30px"},attrs:{xs:24,sm:8}},[r("vs-button",{staticStyle:{"margin-left":"0px"},attrs:{block:"",warn:"",loading:t.approveButtonLoading},on:{click:t.approve}},[t._v(" Approve Token ")])],1),r("el-col",{staticStyle:{"line-height":"30px"},attrs:{xs:0,sm:2}}),r("el-col",{staticStyle:{"line-height":"30px"},attrs:{xs:24,sm:8}},[r("vs-button",{staticStyle:{"margin-left":"0px"},attrs:{block:"",loading:t.initiateButtonLoading},on:{click:t.showInitiateDialog}},[t._v(" Initiate ")])],1)],1)],2)])],1),r("el-row",{staticStyle:{margin:"0 auto","margin-top":"40px","margin-bottom":"100px",color:"#999999"}},[t._v(" "+t._s(t.$t("noticeTeam"))+" ")])],1),r("vs-dialog",{attrs:{loading:t.initiateDialogLoading,width:"550px","not-center":"","prevent-close":""},scopedSlots:t._u([{key:"header",fn:function(){return[r("h4",{staticClass:"not-margin"},[t._v("Initiate Project")])]},proxy:!0},{key:"footer",fn:function(){return[r("div",{staticClass:"con-footer"},[r("vs-button",{attrs:{transparent:""},on:{click:t.createSummary}},[t._v(" "+t._s(t.$t("noticeConfirm"))+" ")]),r("vs-button",{attrs:{dark:"",transparent:""},on:{click:function(e){t.initiateDialogShow=!1}}},[t._v(" "+t._s(t.$t("noticeCancel"))+" ")])],1)]},proxy:!0}]),model:{value:t.initiateDialogShow,callback:function(e){t.initiateDialogShow=e},expression:"initiateDialogShow"}},[r("div",{staticClass:"con-content"},[r("p",[t._v("Are you sure to initiate project?")])])])],1)},o=[],a=(r("a4d3"),r("e01a"),r("b0c0"),r("5530")),i=(r("96cf"),r("1da1")),s=r("f121"),c=r("fa7d"),l=(r("901e"),r("2f62")),u=r("eea1"),p=r.n(u),d=(r("07e9"),{name:"Apply",components:{mEditor:p.a},data:function(){return{initiateDialogShow:!1,initiateDialogLoading:!1,approveButtonLoading:!1,initiateButtonLoading:!1,isNeedApprove:!1,tokenIndex:0,personAddrArray:[""],amount:"",title:"",description:"",judgerOrgs:[],showDatas:[],kindleIndex:0,isEncrypt:!1}},computed:{entranceContract:function(){return this.$store.state.web3.entranceContract},tokens:function(){return this.$store.state.web3.tokens}},created:function(){return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n,o,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,n=r.$vs.loading({type:"square",text:"Loading..."}),e.next=4,r.entranceContract.getJudgerOrgs();case 4:for(o=e.sent,t.judgerOrgs=o.data.judgerOrgs,r.showDatas=[],a=0;a<r.judgerOrgs.length;a++)i={},i.text=r.judgerOrgs[a].name+" Team "+c["a"].shortAddr(r.judgerOrgs[a].id),r.showDatas.push(i);n.close();case 9:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){},methods:Object(a["a"])(Object(a["a"])({},Object(l["b"])(["ethLogin"])),{},{addAddr:function(){this.personAddrArray.push("")},approve:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t,null!=r.$store.state.web3.account){e.next=4;break}return e.next=4,r.ethLogin();case 4:if(0!=r.$store.state.web3.isPortalInstalled){e.next=7;break}return r.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:r.$t("error"),text:r.$t("noticeWallet")}),e.abrupt("return");case 7:if(null!=r.$store.state.web3.account){e.next=10;break}return r.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:r.$t("error"),text:r.$t("noticeAddr")}),e.abrupt("return");case 10:if(!(""==r.amount||r.amount<=0)){e.next=13;break}return t.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:r.$t("error"),text:"Please input correct token number"}),e.abrupt("return");case 13:if(0!=r.tokenIndex){e.next=16;break}return t.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:r.$t("error"),text:"Please select token kindle"}),e.abrupt("return");case 16:return n=r.tokenIndex-1,r.approveButtonLoading=!0,e.next=20,r.tokens[n].contract.allowance(t.$store.state.web3.account,s["default"].entranceAddress);case 20:if(o=e.sent,!o.isLessThan(r.amount)){e.next=35;break}return e.next=24,r.tokens[n].contract.approve(t.$store.state.web3.account,s["default"].entranceAddress,r.amount);case 24:if(a=e.sent,r.approveButtonLoading=!1,console.log(a),1!=a.succ){e.next=32;break}r.isNeedApprove=!1,t.$vs.notification({duration:6e3,icon:"<i class='bx bx-select-multiple' ></i>",progress:"auto",color:"success",position:"top-center",title:"Success",text:"Approve token succeeded"}),e.next=35;break;case 32:return t.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:r.$t("error"),text:a.message}),r.isNeedApprove=!0,e.abrupt("return");case 35:t.$vs.notification({duration:6e3,icon:"<i class='bx bx-select-multiple' ></i>",progress:"auto",color:"success",position:"top-center",title:"Success",text:"You have enough approved token"}),r.approveButtonLoading=!1;case 37:case"end":return e.stop()}}),e)})))()},showInitiateDialog:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t,null!=r.$store.state.web3.account){e.next=4;break}return e.next=4,r.ethLogin();case 4:if(0!=r.$store.state.web3.isPortalInstalled){e.next=7;break}return r.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:r.$t("error"),text:r.$t("noticeWallet")}),e.abrupt("return");case 7:if(null!=r.$store.state.web3.account){e.next=10;break}return r.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:r.$t("error"),text:r.$t("noticeAddr")}),e.abrupt("return");case 10:if(""!=r.title&&""!=r.description&&0!=r.kindleIndex&&0!=r.tokenIndex){e.next=13;break}return r.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:r.$t("error"),text:"Please enter the correct information"}),e.abrupt("return");case 13:r.initiateDialogShow=!0;case 14:case"end":return e.stop()}}),e)})))()},createSummary:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t,n=r.tokenIndex-1,o="# "+r.title+"\n"+r.description,r.initiateDialogLoading=!0,e.next=6,r.entranceContract.createMainContract(r.$store.state.web3.account,r.personAddrArray,r.judgerOrgs[r.kindleIndex-1].id,o,r.amount,r.tokens[n].address);case 6:if(a=e.sent,r.initiateDialogLoading=!1,console.log(a),1!=a.succ){e.next=13;break}r.initiateDialogShow=!1,e.next=15;break;case 13:return t.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:r.$t("error"),text:a.message}),e.abrupt("return");case 15:case"end":return e.stop()}}),e)})))()},maxSwapMoney:function(){}})}),x=d,f=(r("7269"),r("2877")),g=Object(f["a"])(x,n,o,!1,null,null,null);e["default"]=g.exports},6708:function(t,e,r){},7269:function(t,e,r){"use strict";r("6708")}}]);
//# sourceMappingURL=apply.bbf0c21d.js.map